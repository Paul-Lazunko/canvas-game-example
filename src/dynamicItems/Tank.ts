import { ADynamicItem } from '../abstract/ADynamicItem';
import { EOrientation } from '../constants';
import { IDynamicItemOptions, ISize } from '../interfaces';

export class Tank extends ADynamicItem {

  public orientation: EOrientation;

  public size: ISize = {
    width: 13,
    height: 13
  };

  protected renderingData: { [key: string]: string[][]} = {
    y: [
      [ '#333', '#333', '#333', '#333',  null, null, null,  null, null, '#333','#333', '#333', '#333' ],
      [ '#666', '#666', '#666', '#666',  null, null, null,  null, null, '#666','#666', '#666', '#666' ],
      [ '#333', '#333', '#333', '#333',  '#333', '#333', '#333',  '#333', '#333', '#333','#333', '#333', '#333' ],
      [ '#666', '#666', '#666', '#666',  '#333', '#333', '#333',  '#333', '#333', '#666','#666', '#666', '#666' ],
      [ '#333', '#333', '#333', '#333',  '#333', '#333', '#111',  '#333', '#333', '#333','#333', '#333', '#333' ],
      [ '#666', '#666', '#666', '#666',  '#333', '#111', '#111',  '#111', '#333', '#666','#666', '#666', '#666' ],
      [ '#333', '#333', '#333', '#333',  '#111', '#111', '#111',  '#111', '#111', '#333','#333', '#333', '#333' ],
      [ '#666', '#666', '#666', '#666',  '#333', '#111', '#111',  '#111', '#333', '#666','#666', '#666', '#666' ],
      [ '#333', '#333', '#333', '#333',  '#333', '#333', '#111',  '#333', '#333', '#333','#333', '#333', '#333' ],
      [ '#666', '#666', '#666', '#666',  '#333', '#333', '#333',  '#333', '#333', '#666','#666', '#666', '#666' ],
      [ '#333', '#333', '#333', '#333',  '#333', '#333', '#333',  '#333', '#333', '#333','#333', '#333', '#333' ],
      [ '#666', '#666', '#666', '#666',  null, null, null,  null, null, '#666','#666', '#666', '#666' ],
      [ '#333', '#333', '#333', '#333',  null, null, null,  null, null, '#333','#333', '#333', '#333' ],

    ],
    x: [
      [ '#333', '#666', '#333', '#666',  '#333', '#666', '#333', '#666', '#333', '#666','#333', '#666', '#333' ],
      [ '#333', '#666', '#333', '#666',  '#333', '#666', '#333', '#666', '#333', '#666','#333', '#666', '#333' ],
      [ '#333', '#666', '#333', '#666',  '#333', '#666', '#333', '#666', '#333', '#666','#333', '#666', '#333' ],
      [ '#333', '#666', '#333', '#666',  '#333', '#666', '#333', '#666', '#333', '#666','#333', '#666', '#333' ],
      [  null, null, '#333', '#333',  '#333', '#333', '#111',  '#333', '#333', '#333','#333',  null, null ],
      [ null, null, '#333', '#333',  '#333', '#111', '#111',  '#111', '#333', '#333','#333',  null, null],
      [  null, null, '#333', '#333',  '#111', '#111', '#111',  '#111', '#111', '#333','#333',  null, null ],
      [  null, null, '#333', '#333',  '#333', '#111', '#111',  '#111', '#333', '#333','#333',  null, null ],
      [  null, null, '#333', '#333',  '#333', '#333', '#111',  '#333', '#333', '#333','#333',  null, null ],
      [ '#333', '#666', '#333', '#666',  '#333', '#666', '#333', '#666', '#333', '#666','#333', '#666', '#333' ],
      [ '#333', '#666', '#333', '#666',  '#333', '#666', '#333', '#666', '#333', '#666','#333', '#666', '#333' ],
      [ '#333', '#666', '#333', '#666',  '#333', '#666', '#333', '#666', '#333', '#666','#333', '#666', '#333' ],
      [ '#333', '#666', '#333', '#666',  '#333', '#666', '#333', '#666', '#333', '#666','#333', '#666', '#333' ],
    ],
  };

  public armor: number = 10;
  public health: number = 100;
  public speed: number = 7;

  constructor(options: IDynamicItemOptions) {
    super();
    this.orientation =  EOrientation.HORIZONTAL;
    this.position = options.position;
    this.weapons = options.weapons;
  }

  render(ctx: any): void {
    const matrix: string[][] = this.renderingData[this.orientation];
    for ( let i =0; i < matrix.length; i = i + 1 ) {
      const matrixItem: string[] = matrix[i];
      for ( let j = 0; j < matrixItem.length; j = j + 1 ) {
        ctx.fillStyle = matrixItem[j];
        ctx.fillRect(this.position.x + j, this.position.y + i, 1,1);
      }
    }
  }

  die(ctx: any) {
    ctx.fillStyle = '#dd0';
    ctx.fillRect(this.position.x, this.position.y, this.size.width,this.size.height);
  }

}
